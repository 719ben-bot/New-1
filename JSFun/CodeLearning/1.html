<!DOCTYPE html>
<html>
<head>
	<title>递归</title>
</head>
<body>

</body>
<script type="text/javascript">
	var meta = [1,2,[3,4,[5]],[3,4,[5]],[3,4,[5]],[3,4,[5]],[3,4,[5]],[3,4,[5]],[3,4,[5]],[3,4,[5]],6,6,[7,[8,9,[10,11,[12]],[10,11,[12]],[10,11,[12]]]]];
	
	function fillArray(array,result){
		for(var i = 0; i < array.length; ++i){
			var temp = array[i];
			if(Array.isArray(temp)){
				fillArray(temp, result);
			} else {
				result.push(array[i]);
			}
		}
	}
	
	var date1 = new Date();
	var time1 = date1.getTime();
	var result = [];
	fillArray(meta, result);
	var date2 = new Date();
	var time2 = date2.getTime();
	console.log(result);
	console.log('before:' , (time2 - time1));



	var date3 = new Date();
	var time3 = date3.getTime();
	var map = {};
	function fillArrayOther(arr, res){
		if(!arr.length){
			return [];
		}
		for(var j = 0; j < arr.length; ++j){
			var temp = arr[j];
			var g = map[temp];
			if(g){
				res.push(g);
			} else {
				if(Array.isArray(temp)){
					fillArrayOther(temp, res);
				} else {
					map[temp] = temp;
					res.push(temp);
				}
			}
		}
	}
    var res = [];
	fillArrayOther(meta, res);
	var date4 = new Date();
	var time4 = date4.getTime();
	console.log(res);
	console.log('after:' , (time4 - time3));
	</script>
</html>